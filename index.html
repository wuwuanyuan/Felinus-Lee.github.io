<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆè¯­å¡«ç©ºæç°æ¸¸æˆ</title>
    <style>
        :root {
            --primary: #4CAF50;
            --secondary: #2196F3;
            --danger: #f44336;
        }

        body {
            font-family: "PingFang SC", system-ui;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .status-bar {
            width: 100%;
            max-width: 500px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .status-item {
            background: white;
            padding: 0.8rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
            font-size: 0.9rem;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2px;
            width: 100%;
            max-width: 320px;
            margin: 1rem 0;
        }

        .tian-cell {
            aspect-ratio: 1;
            border: 2px solid #333;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            background: white;
            cursor: pointer;
        }

        .tian-cell.blank {
            color: #999;
            background: #f8f8f8;
        }

        .tian-cell::before,
        .tian-cell::after {
            content: "";
            position: absolute;
            background: rgba(0,0,0,0.2);
        }

        .tian-cell::before {
            width: 100%;
            height: 1px;
            top: 50%;
        }

        .tian-cell::after {
            height: 100%;
            width: 1px;
            left: 50%;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-direction: column;
            width: 100%;
            max-width: 300px;
            margin: 1rem 0;
        }

        button {
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: 0.2s;
        }

        .submit-btn {
            background: var(--primary);
            color: white;
        }

        .cashout-btn {
            background: var(--secondary);
            color: white;
        }

        .hint-btn {
            background: #FF9800;
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            text-align: center;
        }

        @media (max-width: 375px) {
            .tian-cell { font-size: 1.5rem; }
            .status-item { font-size: 0.8rem; }
        }
    </style>
</head>
<body>
    <div class="status-bar">
        <div class="status-item">ğŸ¦ ä½™é¢ï¼š<span id="balance">0.00</span>å…ƒ</div>
        <div class="status-item">ğŸ•’ æ—¶é—´ï¼š<span id="time">-</span></div>
    </div>

    <div class="grid-container" id="grid"></div>

    <div class="button-group">
        <button class="hint-btn" onclick="showHint()">ç­”æ¡ˆæç¤ºï¼ˆ-0.5å…ƒï¼‰</button>
        <button class="cashout-btn" onclick="showCashoutModal()">ç”³è¯·æç°</button>
    </div>

    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <h3>æ­å–œæ‚¨ï¼</h3>
            <p>è·å¾—å¥–åŠ±ï¼š<span id="rewardAmount">0.00</span>å…ƒ</p >
            <button class="submit-btn" onclick="hideRewardModal()">ç¡®å®š</button>
        </div>
    </div>

    <div id="cashoutModal" class="modal">
        <div class="modal-content">
            <h3>æç°ç”³è¯·</h3>
            <p>å½“å‰å¯æç°é‡‘é¢ï¼š<span id="availableBalance">0.00</span>å…ƒ</p >
            <input type="number" id="cashoutAmount" placeholder="è¾“å…¥æç°é‡‘é¢" step="0.01">
            <div class="button-group" style="margin-top:1rem">
                <button class="submit-btn" onclick="processCashout()">ç¡®è®¤æç°</button>
                <button class="cashout-btn" onclick="hideCashoutModal()">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <script>
        // æœ¬åœ°æˆè¯­åº“ï¼ˆ200æ¡ï¼‰
        const idioms = [
            "å®ˆæ ªå¾…å…”", "ç”»é¾™ç‚¹ç›", "æœ›æ¢…æ­¢æ¸´", "ç ´é‡œæ²‰èˆŸ", "äº¡ç¾Šè¡¥ç‰¢",
            "é”¦ä¸Šæ·»èŠ±", "é›ªä¸­é€ç‚­", "æŒ‡é¹¿ä¸ºé©¬", "èƒ¸æœ‰æˆç«¹", "æ¯å¼“è›‡å½±",
            "ä¸€é©¬å½“å…ˆ", "ä¸œå±±å†èµ·", "ç”»è›‡æ·»è¶³", "é—»é¸¡èµ·èˆ", "åˆ»èˆŸæ±‚å‰‘",
            "æ©è€³ç›—é“ƒ", "ç‹å‡è™å¨", "äº•åº•ä¹‹è›™", "å¯¹ç‰›å¼¹ç´", "ç­é—¨å¼„æ–§",
            "å¶å…¬å¥½é¾™", "æäººå¿§å¤©", "æ»¥ç«½å……æ•°", "ä¹°æ¤Ÿè¿˜ç ", "è‡ªç›¸çŸ›ç›¾",
            "å—è¾•åŒ—è¾™", "æ‹”è‹—åŠ©é•¿", "æ„šå…¬ç§»å±±", "ç²¾å«å¡«æµ·", "å¤¸çˆ¶é€æ—¥",
            "å››é¢æ¥šæ­Œ", "ä¸‰é¡¾èŒ…åº", "å§è–ªå°èƒ†", "è´Ÿè†è¯·ç½ª", "å®Œç’§å½’èµµ",
            "æ‚¬æ¢åˆºè‚¡", "å‡¿å£å·å…‰", "ç¨‹é—¨ç«‹é›ª", "é—»é¸¡èµ·èˆ", "çº¸ä¸Šè°ˆå…µ",
            "èƒŒæ°´ä¸€æˆ˜", "ç ´é‡œæ²‰èˆŸ", "å››é¢æ¥šæ­Œ", "è‰æœ¨çš†å…µ", "é£å£°é¹¤å”³",
            "æŠ•ç¬”ä»æˆ", "æ´›é˜³çº¸è´µ", "æ±Ÿéƒæ‰å°½", "é«˜å±±æµæ°´", "ç”»é¾™ç‚¹ç›",
            "å…¥æœ¨ä¸‰åˆ†", "æ‰é«˜å…«æ–—", "å­¦å¯Œäº”è½¦", "æ±—ç‰›å……æ ‹", "éŸ¦ç¼–ä¸‰ç»",
            "å›Šè¤æ˜ é›ª", "æ‚¬æ¢åˆºè‚¡", "å‡¿å£å·å…‰", "ç¨‹é—¨ç«‹é›ª", "é—»é¸¡èµ·èˆ",
            "çº¸ä¸Šè°ˆå…µ", "èƒŒæ°´ä¸€æˆ˜", "ç ´é‡œæ²‰èˆŸ", "å››é¢æ¥šæ­Œ", "è‰æœ¨çš†å…µ",
            "é£å£°é¹¤å”³", "æŠ•ç¬”ä»æˆ", "æ´›é˜³çº¸è´µ", "æ±Ÿéƒæ‰å°½", "é«˜å±±æµæ°´",
            "ç”»é¾™ç‚¹ç›", "å…¥æœ¨ä¸‰åˆ†", "æ‰é«˜å…«æ–—", "å­¦å¯Œäº”è½¦", "æ±—ç‰›å……æ ‹",
            "éŸ¦ç¼–ä¸‰ç»", "å›Šè¤æ˜ é›ª", "æ‚¬æ¢åˆºè‚¡", "å‡¿å£å·å…‰", "ç¨‹é—¨ç«‹é›ª",
            "é—»é¸¡èµ·èˆ", "çº¸ä¸Šè°ˆå…µ", "èƒŒæ°´ä¸€æˆ˜", "ç ´é‡œæ²‰èˆŸ", "å››é¢æ¥šæ­Œ",
            "è‰æœ¨çš†å…µ", "é£å£°é¹¤å”³", "æŠ•ç¬”ä»æˆ", "æ´›é˜³çº¸è´µ", "æ±Ÿéƒæ‰å°½",
            "é«˜å±±æµæ°´", "ç”»é¾™ç‚¹ç›", "å…¥æœ¨ä¸‰åˆ†", "æ‰é«˜å…«æ–—", "å­¦å¯Œäº”è½¦",
            "æ±—ç‰›å……æ ‹", "éŸ¦ç¼–ä¸‰ç»", "å›Šè¤æ˜ é›ª", "æ‚¬æ¢åˆºè‚¡", "å‡¿å£å·å…‰",
            "ç¨‹é—¨ç«‹é›ª", "é—»é¸¡èµ·èˆ", "çº¸ä¸Šè°ˆå…µ", "èƒŒæ°´ä¸€æˆ˜", "ç ´é‡œæ²‰èˆŸ",
            "å››é¢æ¥šæ­Œ", "è‰æœ¨çš†å…µ", "é£å£°é¹¤å”³", "æŠ•ç¬”ä»æˆ", "æ´›é˜³çº¸è´µ",
            "æ±Ÿéƒæ‰å°½", "é«˜å±±æµæ°´", "ç”»é¾™ç‚¹ç›", "å…¥æœ¨ä¸‰åˆ†", "æ‰é«˜å…«æ–—",
            "å­¦å¯Œäº”è½¦", "æ±—ç‰›å……æ ‹", "éŸ¦ç¼–ä¸‰ç»", "å›Šè¤æ˜ é›ª", "æ‚¬æ¢åˆºè‚¡",
            "å‡¿å£å·å…‰", "ç¨‹é—¨ç«‹é›ª", "é—»é¸¡èµ·èˆ", "çº¸ä¸Šè°ˆå…µ", "èƒŒæ°´ä¸€æˆ˜",
            "ç ´é‡œæ²‰èˆŸ", "å››é¢æ¥šæ­Œ", "è‰æœ¨çš†å…µ", "é£å£°é¹¤å”³", "æŠ•ç¬”ä»æˆ",
            "æ´›é˜³çº¸è´µ", "æ±Ÿéƒæ‰å°½", "é«˜å±±æµæ°´", "ç”»é¾™ç‚¹ç›", "å…¥æœ¨ä¸‰åˆ†",
            "æ‰é«˜å…«æ–—", "å­¦å¯Œäº”è½¦", "æ±—ç‰›å……æ ‹", "éŸ¦ç¼–ä¸‰ç»", "å›Šè¤æ˜ é›ª",
            "æ‚¬æ¢åˆºè‚¡", "å‡¿å£å·å…‰", "ç¨‹é—¨ç«‹é›ª", "é—»é¸¡èµ·èˆ", "çº¸ä¸Šè°ˆå…µ",
            "èƒŒæ°´ä¸€æˆ˜", "ç ´é‡œæ²‰èˆŸ", "å››é¢æ¥šæ­Œ", "è‰æœ¨çš†å…µ", "é£å£°é¹¤å”³",
            "æŠ•ç¬”ä»æˆ", "æ´›é˜³çº¸è´µ", "æ±Ÿéƒæ‰å°½", "é«˜å±±æµæ°´", "ç”»é¾™ç‚¹ç›"
        ];

        let balance = 0;
        let currentIdiom = null;
        let blankCell = null;

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            loadIdiom();
            initEventListeners();
            startClock();
        });

        // åŠ è½½æˆè¯­
        function loadIdiom() {
            const randomIndex = Math.floor(Math.random() * idioms.length);
            const word = idioms[randomIndex];
            currentIdiom = {
                word: word,
                blankPos: Math.floor(Math.random() * 4)
            };
            renderGrid();
        }

        // æ¸²æŸ“ç”°å­—æ ¼
        function renderGrid() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            
            Array.from(currentIdiom.word).forEach((char, index) => {
                const cell = document.createElement('div');
                cell.className = 'tian-cell' + (index === currentIdiom.blankPos ? ' blank' : '');
                cell.textContent = index === currentIdiom.blankPos ? '_' : char;
                if (index === currentIdiom.blankPos) {
                    cell.addEventListener('click', () => handleCellClick(cell));
                    blankCell = cell;
                }
                grid.appendChild(cell);
            });
        }

        // å¤„ç†ç”°å­—æ ¼ç‚¹å‡»
        function handleCellClick(cell) {
            const userAnswer = prompt('è¯·è¾“å…¥ç¼ºå¤±çš„æ±‰å­—ï¼š');
            if (userAnswer && userAnswer.length === 1) {
                checkAnswer(userAnswer, cell);
            }
        }

        // ç­”æ¡ˆéªŒè¯
        function checkAnswer(userAnswer, cell) {
            const correctChar = currentIdiom.word[currentIdiom.blankPos];
            if (userAnswer === correctChar) {
                const reward = (Math.random() * 0.8 + 0.3).toFixed(2); // å¥–åŠ±0.3-1.1å…ƒ
                updateBalance(parseFloat(reward));
                showRewardModal(reward);
                cell.textContent = correctChar;
                cell.classList.remove('blank');
                cell.style.color = 'var(--primary)';
                setTimeout(loadIdiom, 1200);
            } else {
                alert(`âŒ é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆï¼š${correctChar}`);
            }
        }

        // æ˜¾ç¤ºå¥–åŠ±æ¨¡æ€æ¡†
        function showRewardModal(amount) {
            document.getElementById('rewardAmount').textContent = amount;
            document.getElementById('rewardModal').style.display = 'flex';
        }

        function hideRewardModal() {
            document.getElementById('rewardModal').style.display = 'none';
        }

        // ç­”æ¡ˆæç¤º
        function showHint() {
            if (balance < 0.5) {
                alert('ä½™é¢ä¸è¶³ï¼Œæ— æ³•ä½¿ç”¨æç¤ºåŠŸèƒ½');
                return;
            }
            balance -= 0.5;
            document.getElementById('balance').textContent = balance.toFixed(2);
            blankCell.textContent = currentIdiom.word[currentIdiom.blankPos];
            blankCell.classList.remove('blank');
            blankCell.style.color = 'var(--primary)';
            setTimeout(loadIdiom, 1200);
        }

        // ä½™é¢å¤„ç†
        function updateBalance(amount) {
            balance += Number(amount);
            document.getElementById('balance').textContent = balance.toFixed(2);
        }

        // æç°åŠŸèƒ½
        function showCashoutModal() {
            document.getElementById('availableBalance').textContent = balance.toFixed(2);
            document.getElementById('cashoutModal').style.display = 'flex';
        }

        function hideCashoutModal() {
            document.getElementById('cashoutModal').style.display = 'none';
        }

        function processCashout() {
            const amount = parseFloat(document.getElementById('cashoutAmount').value || 0);
            
            if (amount < 1) return alert('æœ€ä½æç°1å…ƒ');
            if (amount > balance) return alert('è¶…å‡ºå¯ç”¨ä½™é¢');
            
            balance -= amount;
            document.getElementById('balance').textContent = balance.toFixed(2);
            hideCashoutModal();
            alert(`âœ… æˆåŠŸæç°${amount.toFixed(2)}å…ƒ`);
        }

        // è¾…åŠ©åŠŸèƒ½
        function initEventListeners() {
            // å…¶ä»–äº‹ä»¶ç›‘å¬
        }

        function startClock() {
            setInterval(() => {
                document.getElementById('time').textContent = 
                    new Date().toLocaleTimeString('zh-CN', { hour12: false });
            }, 1000);
        }
    </script>
</body>
</html>
